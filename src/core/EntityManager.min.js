var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","core/Manager","core/Entity","core/utils/Bag","core/utils/BitSet"],function(n,t,i,r,u,f){var s=i,h=r,o=u,c=f,l=function(n){function t(){n.call(this),this._className="EntityManager",this._active=0,this._added=0,this._created=0,this._deleted=0,this._entities=new o.Bag,this._disabled=new c.BitSet,this._identifierPool=new e}return __extends(t,n),t.prototype.initialize=function(){},t.prototype.createEntityInstance=function(){var n=new h.Entity(this.world,this._identifierPool.checkOut());return this._created++,n},t.prototype.added=function(n){this._active++,this._added++,this._entities.set(n.getId(),n)},t.prototype.enabled=function(n){this._disabled.clear(n.getId())},t.prototype.disabled=function(n){this._disabled.set(n.getId())},t.prototype.deleted=function(n){this._entities.set(n.getId(),null),this._disabled.clear(n.getId()),this._identifierPool.checkIn(n.getId()),this._active--,this._deleted++},t.prototype.isActive=function(n){return this._entities.get(n)!=null},t.prototype.isEnabled=function(n){return!this._disabled.get(n)},t.prototype.getEntity=function(n){return this._entities[n]},t.prototype.getActiveEntityCount=function(){return this._active},t.prototype.getTotalCreated=function(){return this._created},t.prototype.getTotalAdded=function(){return this._added},t.prototype.getTotalDeleted=function(){return this._deleted},t}(s.Manager),e;t.EntityManager=l,e=function(){function n(){}return n.prototype.IdentifierPool=function(){this._ids=new o.Bag},n.prototype.checkOut=function(){return this._ids.size>0?this._ids.removeLast():this._nextAvailableId++},n.prototype.checkIn=function(n){this._ids.add(n)},n}(),t.IdentifierPool=e})