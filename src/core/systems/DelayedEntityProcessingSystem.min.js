var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","core/EntitySystem"],function(n,t,i){var r=i,u=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.processEntity=function(){throw new Error("This method is abstract");},t.prototype.processEntities=function(n){for(var i,r,t=0,u=n.size;u>t;t++)i=n.get(t),this.processDelta(i,this._acc),r=this.getRemainingDelay(i),r<=0?this.processExpired(i):this.offerDelay(r);this.stop()},t.prototype.inserted=function(n){var t=this.getRemainingDelay(n);t>0&&this.offerDelay(t)},t.prototype.getRemainingDelay=function(){throw new Error("This method is abstract");},t.prototype.checkProcessing=function(){return this._running&&(this._acc+=this.world.getDelta(),this._acc>=this._delay)?!0:!1},t.prototype.processDelta=function(){throw new Error("This method is abstract");},t.prototype.processExpired=function(){throw new Error("This method is abstract");},t.prototype.restart=function(n){this._delay=n,this._acc=0,this._running=!0},t.prototype.offerDelay=function(){(!this._running||this._delay<this.getRemainingTimeUntilProcessing())&&this.restart(this._delay)},t.prototype.getInitialTimeDelay=function(){return this._delay},t.prototype.getRemainingTimeUntilProcessing=function(){return this._running?this._delay-this._acc:0},t.prototype.isRunning=function(){return this._running},t.prototype.stop=function(){this._running=!1,this._acc=0},t}(r.EntitySystem);t.EntityProcessingSystem=u})